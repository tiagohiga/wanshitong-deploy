"use strict";(self.webpackChunkwst_front=self.webpackChunkwst_front||[]).push([[308],{9308:(N,p,a)=>{a.r(p),a.d(p,{LoginModule:()=>L});var m=a(6814),c=a(2787);class _{constructor(){this.token="",this.nome="",this.funcao="",this.email=""}}var r=a(6223);class M{constructor(){this.emailUsuario="",this.senhaUsuario=""}}var g=a(7337),n=a(5879),h=a(4247),f=a(5195),d=a(1274),x=a(2296),u=a(9157),C=a(2032);function v(e,s){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.Oqu(t.getErrorMessage())}}function b(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"mat-card",3)(3,"mat-toolbar",4)(4,"mat-toolbar-row")(5,"span"),n._uU(6,"Login"),n.qZA()()(),n.TgZ(7,"div",5)(8,"mat-form-field")(9,"mat-label"),n._uU(10,"Digite seu e-mail"),n.qZA(),n.TgZ(11,"input",6),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.userLogin.emailUsuario=o)}),n.qZA(),n.YNc(12,v,2,1,"mat-error",7),n.qZA()(),n.TgZ(13,"div",8)(14,"mat-form-field")(15,"mat-label"),n._uU(16,"Digite sua senha"),n.qZA(),n.TgZ(17,"input",9),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.userLogin.senhaUsuario=o)}),n.qZA()()(),n.TgZ(18,"button",10),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.onSignin())}),n._uU(19,"Cadastre-se"),n.qZA(),n.TgZ(20,"div",11)(21,"button",12),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.onEntrar())}),n._uU(22,"Entrar"),n.qZA(),n.TgZ(23,"button",13),n._uU(24,"Cancelar"),n.qZA()()()()()}if(2&e){const t=n.oxw();n.xp6(11),n.Q6J("ngModel",t.userLogin.emailUsuario),n.xp6(1),n.Q6J("ngIf",t.email.invalid),n.xp6(5),n.Q6J("ngModel",t.userLogin.senhaUsuario)("type",t.hide?"password":"text")}}let Z=(()=>{class e{constructor(t,i,o){this.loginService=t,this.router=i,this.route=o,this.hide=!0,this.userLogin=new M,this.login=new _,this.email=new r.NI("",[r.kI.required,r.kI.email])}getErrorMessage(){return this.email.hasError("required")?"Digite seu e-mail":this.email.hasError("email")?"N\xe3o \xe9 um e-mail v\xe1lido":""}onSignin(){this.router.navigate(["signin"],{relativeTo:this.route})}onEntrar(){this.loginService.entrar(this.userLogin).subscribe(t=>{g.N.token=t.token,g.N.email=t.email,g.N.funcao=t.funcao,g.N.nome=t.nome,this.router.navigate(["/books"])},t=>{(500==t.status||403==t.status)&&alert("Usu\xe1rio ou Senha est\xe3o errados")})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h.r),n.Y36(c.F0),n.Y36(c.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:1,vars:1,consts:[["class","width main-div",4,"ngIf"],[1,"width","main-div"],[1,"login-box"],["color","primary",1,"mat-card-container"],["color","primary"],[1,"example-container","height"],["matInput","","placeholder","pat@example.com","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"example-container"],["matInput","",3,"ngModel","type","ngModelChange"],[1,"link-button",3,"click"],[1,"example-button-row"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","warn"]],template:function(t,i){1&t&&n.YNc(0,b,25,4,"div",0),2&t&&n.Q6J("ngIf",!i.loginService.logado())},dependencies:[m.O5,f.a8,d.Ye,d.rD,x.lW,u.KE,u.hX,u.TO,C.Nt,r.Fj,r.JJ,r.Q7,r.On],styles:["mat-card[_ngcontent-%COMP%]{justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.link-button[_ngcontent-%COMP%]{background:none!important;border:none;padding:0!important;color:#069;text-decoration:underline;cursor:pointer}.width[_ngcontent-%COMP%]{display:flex;align-self:center;justify-content:center;width:100%}.height[_ngcontent-%COMP%]{height:80%}.login-box[_ngcontent-%COMP%]{margin:15% auto auto}"]}),e})();class w{constructor(){this.nomeUsuario="",this.emailUsuario="",this.senhaUsuario=""}}var y=a(2939);function T(e,s){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.Oqu(t.getErrorMessage())}}function U(e,s){if(1&e){const t=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"mat-card",3)(3,"mat-toolbar",4)(4,"mat-toolbar-row")(5,"span"),n._uU(6,"Cadastro"),n.qZA()()(),n.TgZ(7,"div",5)(8,"mat-form-field")(9,"mat-label"),n._uU(10,"Nome"),n.qZA(),n.TgZ(11,"input",6),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.user.nomeUsuario=o)}),n.qZA()()(),n.TgZ(12,"div",7)(13,"mat-form-field")(14,"mat-label"),n._uU(15,"E-mail"),n.qZA(),n.TgZ(16,"input",8),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.user.emailUsuario=o)}),n.qZA(),n.YNc(17,T,2,1,"mat-error",9),n.qZA()(),n.TgZ(18,"div",5)(19,"mat-form-field")(20,"mat-label"),n._uU(21,"Senha"),n.qZA(),n.TgZ(22,"input",10),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.user.senhaUsuario=o)}),n.qZA()()(),n.TgZ(23,"div",5)(24,"mat-form-field")(25,"mat-label"),n._uU(26,"Digite a senha novamente"),n.qZA(),n.TgZ(27,"input",10),n.NdJ("ngModelChange",function(o){n.CHM(t);const l=n.oxw();return n.KtG(l.confirmacaoSenha=o)}),n.qZA()()(),n.TgZ(28,"div",11)(29,"button",12),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.onCadastrar())}),n._uU(30,"Cadastrar"),n.qZA(),n.TgZ(31,"button",13),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.onCancel())}),n._uU(32,"Cancelar"),n.qZA()()()()()}if(2&e){const t=n.oxw();n.xp6(11),n.Q6J("ngModel",t.user.nomeUsuario),n.xp6(5),n.Q6J("ngModel",t.user.emailUsuario),n.xp6(1),n.Q6J("ngIf",t.email.invalid),n.xp6(5),n.Q6J("ngModel",t.user.senhaUsuario)("type",t.hide?"password":"text"),n.xp6(5),n.Q6J("ngModel",t.confirmacaoSenha)("type",t.hide?"password":"text")}}const O=[{path:"",component:Z},{path:"signin",component:(()=>{class e{constructor(t,i,o,l,P){this.loginService=t,this.router=i,this.snackBar=o,this.route=l,this.location=P,this.hide=!0,this.user=new w,this.confirmacaoSenha="",this.email=new r.NI("",[r.kI.required,r.kI.email])}ngOnInit(){}getErrorMessage(){return this.email.hasError("required")?"Digite seu e-mail":this.email.hasError("email")?"N\xe3o \xe9 um e-mail v\xe1lido":""}onSignin(){this.router.navigate(["signin"],{relativeTo:this.route})}onCadastrar(){this.user.senhaUsuario===this.confirmacaoSenha&&this.user.senhaUsuario?this.user.nomeUsuario&&this.user.emailUsuario?this.loginService.cadastrar(this.user).subscribe(t=>this.onSuccess(),t=>{this.onError("Erro ao cadastrar Usu\xe1rio")}):this.onError("O nome do usu\xe1rio e e-mail n\xe3o pode estar vazios"):this.onError("As senhas devem ser iguais")}onCancel(){this.location.back()}onSuccess(){this.snackBar.open("Usu\xe1rio cadastrado com sucesso","",{duration:3e3}),this.onCancel()}onError(t){this.snackBar.open(t,"",{duration:3e3})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h.r),n.Y36(c.F0),n.Y36(y.ux),n.Y36(c.gz),n.Y36(m.Ye))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-signin"]],decls:1,vars:1,consts:[["class","width main-div",4,"ngIf"],[1,"width","main-div"],[1,"login-box"],["color","primary",1,"mat-card-container"],["color","primary"],[1,"example-container"],["matInput","",3,"ngModel","ngModelChange"],[1,"example-container","height"],["matInput","","placeholder","pat@example.com","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],["matInput","",3,"ngModel","type","ngModelChange"],[1,"example-button-row"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","warn",3,"click"]],template:function(t,i){1&t&&n.YNc(0,U,33,7,"div",0),2&t&&n.Q6J("ngIf",!i.loginService.logado())},dependencies:[m.O5,f.a8,d.Ye,d.rD,x.lW,u.KE,u.hX,u.TO,C.Nt,r.Fj,r.JJ,r.Q7,r.On],styles:["mat-card[_ngcontent-%COMP%]{justify-content:center;align-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.link-button[_ngcontent-%COMP%]{background:none!important;border:none;padding:0!important;color:#069;text-decoration:underline;cursor:pointer}.width[_ngcontent-%COMP%]{display:flex;align-self:center;justify-content:center;width:100%}.height[_ngcontent-%COMP%]{height:80%}.login-box[_ngcontent-%COMP%]{margin:15% auto auto}"]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[c.Bz.forChild(O),c.Bz]}),e})();var A=a(6208),J=a(893);let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[m.ez,S,A.m,J.M,r.UX,r.u5]}),e})()}}]);